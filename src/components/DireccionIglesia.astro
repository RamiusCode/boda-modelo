---
// Direccion.astro
---

<section class="py-8 px-4 relative">
  <div class="max-w-xl mx-auto text-center relative">
    <!-- üèõÔ∏è ICONO CEREMONIA CON FLORES EN LOS BORDES -->
    <div class="relative mb-4" id="icono-direccion">
      <!-- üå∏ FLORES EN EL BORDE IZQUIERDO -->
      <div
        class="absolute left-0 top-1/2 -translate-y-1/2 w-10 pointer-events-none -ml-6 sm:-ml-7 md:-ml-8"
        id="flores-dir-izq"
      >
        <img
          src="/imagenes/FlorLateral.webp"
          alt="Flores decorativas izquierda"
          class="w-full h-auto object-contain"
        />
      </div>

      <!-- T√çTULO CEREMONIA -->
      <div class="mb-2" id="titulo-direccion">
        <h2
          class="font-charm text-2xl md:text-3xl text-[#C9A961] font-bold tracking-wide"
        >
          Ceremonia Religiosa
        </h2>
      </div>

      <!-- ICONO CENTRAL -->
      <div class="flex justify-center">
        <img
          src="/imagenes/iglesia.png"
          alt="Icono de ceremonia"
          class="w-24 h-24 md:w-28 md:h-28 lg:w-32 lg:h-32 object-contain icono-dorado"
        />
      </div>

      <!-- üå∏ FLORES EN EL BORDE DERECHO -->
      <div
        class="absolute right-0 top-1/2 -translate-y-1/2 w-10 pointer-events-none -mr-6 sm:-mr-7 md:-mr-8"
        id="flores-dir-der"
      >
        <img
          src="/imagenes/FlorLateral.webp"
          alt="Flores decorativas derecha"
          class="w-full h-auto object-contain scale-x-[-1]"
        />
      </div>
    </div>

    <!-- INFORMACI√ìN -->
    <div class="mb-2" id="info-direccion">
      <!-- Nombre del sal√≥n -->
      <h3 class="font-charm text-xl md:text-2xl text-[#C9A961] font-bold mb-3">
        Sal√≥n Jardines de Plata
      </h3>

      <!-- Mensaje -->
      <p class="font-charm text-lg md:text-xl text-[#626a54] leading-relaxed">
        La ceremonia religiosa se realizar√° en el mismo sal√≥n
      </p>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  if (typeof window !== "undefined") {
    document.addEventListener("DOMContentLoaded", () => {
      // Estado inicial
      gsap.set("#icono-direccion", { opacity: 0, scale: 0.8 });
      gsap.set("#titulo-direccion", { opacity: 0, scale: 0.9 });
      gsap.set("#info-direccion", { opacity: 0, scale: 0.9 });
      gsap.set("#flores-dir-izq", { opacity: 0, x: -30 });
      gsap.set("#flores-dir-der", { opacity: 0, x: 30 });

      // ‚ú® ANIMACI√ìN SIMULT√ÅNEA
      ScrollTrigger.create({
        trigger: "#icono-direccion",
        start: "top 85%",
        end: "top 20%",
        onEnter: () => {
          const tl = gsap.timeline();

          tl.to(
            "#icono-direccion, #flores-dir-izq, #flores-dir-der, #titulo-direccion, #info-direccion",
            {
              opacity: 1,
              duration: 1,
              ease: "power2.out",
            },
          )
            .to(
              "#icono-direccion",
              {
                scale: 1,
                duration: 1,
                ease: "back.out(1.5)",
              },
              "<",
            )
            .to(
              "#flores-dir-izq",
              {
                x: 0,
                duration: 1,
                ease: "power2.out",
              },
              "<",
            )
            .to(
              "#flores-dir-der",
              {
                x: 0,
                duration: 1,
                ease: "power2.out",
              },
              "<",
            )
            .to(
              "#titulo-direccion, #info-direccion",
              {
                scale: 1,
                duration: 1,
                ease: "back.out(1.2)",
              },
              "<",
            );
        },
        onLeaveBack: () => {
          const tl = gsap.timeline();

          tl.to(
            "#icono-direccion, #flores-dir-izq, #flores-dir-der, #titulo-direccion, #info-direccion",
            {
              opacity: 0,
              duration: 0.5,
              ease: "power2.in",
            },
          )
            .to(
              "#icono-direccion",
              {
                scale: 0.8,
                duration: 0.5,
                ease: "power2.in",
              },
              "<",
            )
            .to(
              "#flores-dir-izq",
              {
                x: -30,
                duration: 0.5,
                ease: "power2.in",
              },
              "<",
            )
            .to(
              "#flores-dir-der",
              {
                x: 30,
                duration: 0.5,
                ease: "power2.in",
              },
              "<",
            )
            .to(
              "#titulo-direccion, #info-direccion",
              {
                scale: 0.9,
                duration: 0.5,
                ease: "power2.in",
              },
              "<",
            );
        },
      });

      console.log("üìçüå∏ Secci√≥n de Ceremonia Religiosa inicializada");
    });
  }
</script>

<style>
  .flores-borde-izq,
  .flores-borde-der {
    will-change: transform;
    transition: all 0.3s ease;
  }

  .icono-dorado {
    filter: brightness(0) saturate(100%) invert(73%) sepia(17%) saturate(1089%)
      hue-rotate(358deg) brightness(92%) contrast(86%);
    transition:
      filter 0.3s ease,
      transform 0.3s ease;
  }
</style>
